@keyframes flicker {
  0%   { stroke: #00faff; stroke-width: 2.5; opacity: 1; }
  20%  { stroke: #4dffff; stroke-width: 2.7; opacity: 0.9; }
  40%  { stroke: #00e0ff; stroke-width: 2.3; opacity: 1; }
  60%  { stroke: #80ffff; stroke-width: 2.6; opacity: 0.95; }
  80%  { stroke: #00faff; stroke-width: 2.4; opacity: 1; }
  100% { stroke: #00faff; stroke-width: 2.5; opacity: 1; }
}

path {
  animation: flicker 0.15s infinite;
}
.viz {
  background: radial-gradient(600px 400px at 70% 30%, rgba(0, 250, 255, .15), transparent 60%),
              linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  border: 1px solid rgba(0, 242, 255, .2);
  position: relative;
  overflow: hidden;
  max-height: 80vh;      /* shrink to viewport */
  max-width: 100%;       /* donâ€™t exceed page width */
  display: grid;
  place-items: center;
  padding: 8px;
}

.svg-container {
  position: relative;
  width: 100%;           /* take full width of viz */
  aspect-ratio: 800 / 850; /* maintain original ratio */
}

.svg-container svg {
  width: 100%;           /* scale with container */
  height: auto;          /* auto-adjust height */
}
/* add to your CSS */
.headline {
  position: relative;
  isolation: isolate;
  overflow: hidden;
}
.headline::after{
  content:"";
  position:absolute; inset:-20%;
  background: conic-gradient(from 210deg at 50% 50%,
    transparent 0deg, rgba(255,255,255,.35) 10deg, transparent 20deg);
  mix-blend-mode: screen;
  transform: translateX(-120%) rotate(10deg);
  animation: sheen 4.8s ease-in-out infinite;
}
@keyframes sheen{
  0%  { transform: translateX(-120%) rotate(10deg); }
  60% { transform: translateX(120%)  rotate(10deg); }
  100%{ transform: translateX(120%)  rotate(10deg); }
}
/* Fullscreen flash overlay (starts hidden) */
.flash {
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  --fx: 50%;
  --fy: 50%;
  background:
    radial-gradient(1200px 1200px at var(--fx) var(--fy),
      rgba(255,255,255,1) 0%,
      rgba(255,255,255,0.95) 25%,
      rgba(255,255,255,0.8) 45%,
      rgba(255,255,255,0.25) 70%,
      rgba(255,255,255,0) 100%);
  mix-blend-mode: screen;
  z-index: 9999;
}

/* expanding ring for a nice bang edge */
.flash::after{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(closest-side at var(--fx) var(--fy),
      rgba(255,255,255,.9) 0%,
      rgba(255,255,255,.6) 20%,
      rgba(255,255,255,0) 60%);
  transform: scale(0.7);
  opacity: 0;
}

/* animate in/out */
.flash.show {
  animation: flashbang 800ms cubic-bezier(.2,.7,.2,1) forwards;
}
.flash.show::after {
  animation: ring 800ms cubic-bezier(.2,.7,.2,1) forwards;
}

@keyframes flashbang {
  0%   { opacity: 0; filter: brightness(1) }
  10%  { opacity: 1; filter: brightness(1.3) }
  40%  { opacity: .95; filter: brightness(1.5) }
  100% { opacity: 0; filter: brightness(1) }
}
@keyframes ring {
  0%   { opacity: .0; transform: scale(0.7) }
  20%  { opacity: .8; transform: scale(1.0) }
  100% { opacity: 0;  transform: scale(1.6) }
}

/* optional: quick scene bloom while flashing */
.flashbang-active .scene { filter: brightness(1.2) saturate(1.15); transition: filter 120ms }

/* accessibility */
@media (prefers-reduced-motion: reduce){
  .flash.show, .flash.show::after { animation: none !important; opacity: 0 !important; }
}
